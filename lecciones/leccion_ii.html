<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lecci√≥n II: GITHUB Y LA ESTRUCTURA DE CHANGELOGS Y CHANGESETS</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-color: #0056b3;
            --secondary-color: #f8f9fa;
            --accent-color: #17a2b8;
            --text-color: #333;
            --border-color: #dee2e6;
            --success-color: #28a745;
            --warning-color: #ffc107;
            --github-color: #24292e;
            --structure-color: #4a90e2;
            --data-color: #28a745;
            --security-color: #dc3545;
            --advanced-color: #ffc107;
        }
       
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
       
        body {
            font-family: 'Roboto', sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: #fff;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
       
        .lesson-container {
            background: white;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            margin-bottom: 30px;
        }
       
        .lesson-header {
            background: linear-gradient(135deg, var(--github-color), #444d56);
            color: white;
            padding: 30px;
            text-align: center;
        }
       
        .lesson-title {
            font-size: 2.5em;
            font-weight: 700;
            margin-bottom: 10px;
        }
       
        .lesson-subtitle {
            font-size: 1.2em;
            font-weight: 300;
            opacity: 0.9;
        }
       
        .lesson-content {
            padding: 40px;
        }
       
        .learning-objectives {
            background-color: var(--secondary-color);
            border-left: 5px solid var(--github-color);
            padding: 25px;
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
        }
       
        .learning-objectives h3 {
            color: var(--github-color);
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
       
        .learning-objectives ul {
            list-style-type: none;
            padding-left: 20px;
        }
       
        .learning-objectives li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }
       
        .learning-objectives li:before {
            content: "‚úì";
            position: absolute;
            left: 0;
            color: var(--success-color);
            font-weight: bold;
        }
       
        .concept-section {
            margin: 40px 0;
            padding: 25px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: white;
        }
       
        .concept-section h3 {
            color: var(--github-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--border-color);
        }
       
        .file-structure {
            background: #f6f8fa;
            border: 1px solid #d1d5da;
            border-radius: 6px;
            padding: 20px;
            margin: 25px 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            line-height: 1.8;
        }
       
        .folder {
            color: #0366d6;
            font-weight: bold;
        }
       
        .file {
            color: #24292e;
            margin-left: 20px;
        }
       
        .file::before {
            content: "üìÑ ";
        }
       
        .folder::before {
            content: "üìÅ ";
        }
       
        .json-file {
            color: #6f42c1;
        }
       
        .sql-file {
            color: #28a745;
        }
       
        .code-block {
            background: #1e1e1e;
            color: #d4d4d4;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.6;
            white-space: pre;
            tab-size: 4;
        }
       
        .code-comment {
            color: #6a9955;
        }
       
        .code-keyword {
            color: #569cd6;
        }
       
        .code-string {
            color: #ce9178;
        }
       
        .code-function {
            color: #dcdcaa;
        }
       
        .code-number {
            color: #b5cea8;
        }
       
        .diagram-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }
       
        .diagram-card {
            background: white;
            border: 2px solid var(--border-color);
            border-radius: 8px;
            padding: 25px;
            text-align: center;
            transition: transform 0.3s ease;
        }
       
        .diagram-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
       
        .icon {
            font-size: 2em;
            width: 60px;
            height: 60px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            color: white;
            margin-bottom: 15px;
        }
       
        .workflow-step {
            background: #f1f8ff;
            color: black;
            border-left: 4px solid #0366d6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
       
        .workflow-step-number {
            display: inline-block;
            background: #0366d6;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }
       
        .best-practice {
            background-color: #fff8e1;
            border-left: 5px solid var(--warning-color);
            padding: 25px;
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
        }
       
        .best-practice ul {
            list-style-type: none;
            padding-left: 20px;
        }
       
        .best-practice li {
            margin-bottom: 10px;
            padding-left: 25px;
            position: relative;
        }
       
        .best-practice li:before {
            content: "‚≠ê";
            position: absolute;
            left: 0;
            color: var(--warning-color);
        }
       
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
       
        .comparison-table th {
            background: var(--github-color);
            color: white;
            padding: 15px;
            text-align: left;
        }
       
        .comparison-table td {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
        }
       
        .comparison-table tr:hover {
            background-color: #f8f9fa;
        }
       
        .git-command {
            background: #24292e;
            color: white;
            padding: 10px 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
            display: inline-block;
        }
       
        .activity {
            background-color: #e8f4fd;
            border-left: 5px solid var(--accent-color);
            padding: 25px;
            margin: 30px 0;
            border-radius: 0 8px 8px 0;
        }
       
        .activity h3 {
            color: var(--accent-color);
            margin-bottom: 15px;
        }
       
        .resources {
            background-color: var(--secondary-color);
            padding: 25px;
            border-radius: 8px;
            margin: 30px 0;
        }
       
        .resources h3 {
            color: var(--github-color);
            margin-bottom: 15px;
        }
       
        .resource-item {
            margin-bottom: 15px;
            padding: 15px;
            background: white;
            border-radius: 5px;
            border-left: 4px solid var(--github-color);
        }
       
        .navigation-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
       
        .btn {
            padding: 12px 30px;
            background: var(--github-color);
            color: white;
            text-decoration: none;
            border-radius: 5px;
            font-weight: 500;
            transition: background 0.3s ease;
            border: none;
            cursor: pointer;
        }
       
        .btn:hover {
            background: #000;
        }
       
        .btn-secondary {
            background: var(--accent-color);
        }
       
        .btn-secondary:hover {
            background: #138496;
        }
       
        .tab-container {
            margin: 30px 0;
        }
       
        .tab-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 20px;
        }
       
        .tab-button {
            padding: 10px 20px;
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            cursor: pointer;
            font-weight: 500;
            color: var(--text-color);
            border-radius: 4px;
            transition: all 0.3s ease;
        }
       
        .tab-button.active {
            background: var(--github-color);
            color: white;
            border-color: var(--github-color);
        }
       
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
       
        .tab-content.active {
            display: block;
        }
       
        .changeset-category {
            margin: 25px 0;
            padding: 20px;
            border-radius: 8px;
        }
       
        .category-structure {
            background-color: rgba(74, 144, 226, 0.1);
            border-left: 5px solid var(--structure-color);
        }
       
        .category-data {
            background-color: rgba(40, 167, 69, 0.1);
            border-left: 5px solid var(--data-color);
        }
       
        .category-security {
            background-color: rgba(220, 53, 69, 0.1);
            border-left: 5px solid var(--security-color);
        }
       
        .category-advanced {
            background-color: rgba(255, 193, 7, 0.1);
            border-left: 5px solid var(--advanced-color);
        }
       
        .changeset-example {
            background: #f8f9fa;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
       
        .changeset-example h4 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
       
        .changeset-example h4::before {
            content: "üìã";
        }
       
        .example-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }
       
        /* Nuevas clases para las secciones a√±adidas */
        .execution-commands {
            background: #1a1a1a;
            color: #e0e0e0;
            padding: 25px;
            border-radius: 8px;
            margin: 25px 0;
        }
        
        .execution-commands h4 {
            color: #ffffff;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .execution-commands h4::before {
            content: "‚ö°";
        }
        
        .command-example {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid #4CAF50;
            padding: 15px;
            margin: 10px 0;
            border-radius: 0 6px 6px 0;
            font-family: 'Courier New', monospace;
            color: #0000ff;
        }
        
        .rollback-section {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 25px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .rollback-example {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .rollback-example h5 {
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .rollback-example h5::before {
            content: "‚Ü©Ô∏è";
        }
        
        .danger-note {
            background-color: #f8d7da;
            border-left: 5px solid #dc3545;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 6px 6px 0;
            color: #721c24;
        }
        
        .danger-note h5 {
            color: #721c24;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .danger-note h5::before {
            content: "‚ö†Ô∏è";
        }
        
        .verification-steps {
            background-color: #d1ecf1;
            border-left: 5px solid #0c5460;
            padding: 25px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .verification-steps h4 {
            color: #0c5460;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .verification-steps h4::before {
            content: "üîç";
        }
        
        /* NUEVO: Estructura Changeset */
        .changeset-structure {
            background-color: #f0f7ff;
            border-left: 5px solid #4a90e2;
            padding: 25px;
            margin: 25px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .changeset-structure h4 {
            color: #2c5282;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .changeset-structure h4::before {
            content: "üîß";
        }
        
        .component-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .component-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            transition: transform 0.3s ease;
        }
        
        .component-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .component-icon {
            font-size: 1.5em;
            margin-bottom: 10px;
        }
       
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
       
        @media (max-width: 768px) {
            .lesson-title {
                font-size: 2em;
            }
           
            .lesson-content {
                padding: 20px;
            }
           
            .tab-buttons {
                flex-direction: column;
            }
           
            .tab-button {
                text-align: left;
            }
           
            .comparison-table {
                display: block;
                overflow-x: auto;
            }
           
            .example-grid {
                grid-template-columns: 1fr;
            }
            
            .component-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="lesson-container">
        <header class="lesson-header">
            <h1 class="lesson-title">GITHUB Y ESTRUCTURA DE CHANGELOGS Y CHANGESETS</h1>
            <p class="lesson-subtitle">Integraci√≥n con control de versiones y organizaci√≥n de scripts de base de datos</p>
        </header>
       
        <main class="lesson-content">
            <section class="learning-objectives">
                <h3><span class="icon">üéØ</span> OBJETIVOS DE APRENDIZAJE</h3>
                <ul>
                    <li>Comprender la estructura de carpetas y archivos en GitHub para proyectos Liquibase</li>
                    <li>Dominar la creaci√≥n y organizaci√≥n de changelogs y changesets</li>
                    <li>Entender el flujo de trabajo Git para cambios en base de datos</li>
                    <li>Configurar correctamente el changelog maestro y sus referencias</li>
                    <li>Aplicar convenciones de nombrado y organizaci√≥n seg√∫n est√°ndares de la organizaci√≥n</li>
                </ul>
            </section>
           
            <!-- NUEVA SECCI√ìN: ESTRUCTURA DE UN CHANGESET -->
            <section class="concept-section">
                <h3>üîß ESTRUCTURA DE UN CHANGESET - EXPLICACI√ìN DETALLADA</h3>
                
                <div class="changeset-structure">
                    <h4>ANATOM√çA DE UN CHANGESET LIQUIBASE</h4>
                    <p>Cada changeset en Liquibase tiene una estructura espec√≠fica que Liquibase utiliza para el control de versiones. Veamos cada componente:</p>
                    
                    <div class="component-grid">
                        <div class="component-card">
                            <div class="component-icon">üë§</div>
                            <h5>AUTOR (autor)</h5>
                            <p><strong>Prop√≥sito:</strong> Identifica qui√©n cre√≥ el changeset.</p>
                            <p><strong>Formato:</strong> Tu nombre o alias (ej: juan.perez, maria.garcia).</p>
                            <p><strong>Importante:</strong> Usado junto con el ID para identificar √∫nicamente el changeset.</p>
                            <div class="command-example">-- changeset juan.perez:id:001-1</div>
                        </div>
                        
                        <div class="component-card">
                            <div class="component-icon">üÜî</div>
                            <h5>IDENTIFICADOR (id)</h5>
                            <p><strong>Prop√≥sito:</strong> Identificador √∫nico dentro de ese autor.</p>
                            <p><strong>Formato:</strong> Puede ser num√©rico, alfanum√©rico, incluir versiones, fechas, etc.</p>
                            <p><strong>Importante:</strong> <code>autor + id</code> debe ser √∫nico. Liquibase usa esta combinaci√≥n para saber si ya ejecut√≥ el changeset.</p>
                            <div class="command-example">id:001-1</div>
                        </div>
                        
                        <div class="component-card">
                            <div class="component-icon">üí¨</div>
                            <h5>COMENTARIO (comment)</h5>
                            <p><strong>Prop√≥sito:</strong> Descripci√≥n del prop√≥sito del changeset.</p>
                            <p><strong>Formato:</strong> Texto descriptivo libre.</p>
                            <p><strong>Importante:</strong> No es obligatorio pero altamente recomendado. Liquibase no lo usa para control, solo para logs y reportes.</p>
                            <div class="command-example">-- comment: Crear tabla de usuarios</div>
                        </div>
                        
                        <div class="component-card">
                            <div class="component-icon">‚Ü©Ô∏è</div>
                            <h5>ROLLBACK</h5>
                            <p><strong>Prop√≥sito:</strong> Instrucciones para deshacer el changeset.</p>
                            <p><strong>Formato:</strong> SQL o instrucciones Liquibase para revertir.</p>
                            <p><strong>Importante:</strong> No es obligatorio pero muy √∫til para pruebas y desarrollo. Permite reversi√≥n controlada.</p>
                            <div class="command-example">-- rollback DROP TABLE IF EXISTS users;</div>
                        </div>
                    </div>
                    
                    <div class="workflow-step">
                        <span class="workflow-step-number">!</span>
                        <strong>C√ìMO LIQUIBASE USA ESTOS COMPONENTES</strong>
                        <p><strong>Para control de ejecuci√≥n:</strong> Liquibase almacena en la base de datos (tabla <code>DATABASECHANGELOG</code>) cada changeset ejecutado usando la combinaci√≥n <code>autor + id + nombre_archivo</code>. Si ya existe registrado, no lo vuelve a ejecutar.</p>
                        <p><strong>Para rollback:</strong> Cuando se solicita un rollback, Liquibase busca las instrucciones de rollback definidas y las ejecuta en orden inverso al que se aplicaron los changesets.</p>
                    </div>
                    
                    <div class="example-grid">
                        <div class="changeset-example">
                            <h4>EJEMPLO COMPLETO</h4>
                            <div class="code-block">-- liquibase formatted sql
-- changeset juan.perez:id:001-1
-- comment: Crear tabla de usuarios para sistema de demostraci√≥n

CREATE TABLE IF NOT EXISTS users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) NOT NULL UNIQUE
);

-- rollback DROP TABLE IF EXISTS users;</div>
                            <p><strong>Explicaci√≥n:</strong></p>
                            <ul>
                                <li><strong>Autor:</strong> juan.perez</li>
                                <li><strong>ID:</strong> 001-1</li>
                                <li><strong>Comentario:</strong> Explica el prop√≥sito</li>
                                <li><strong>Rollback:</strong> Instrucciones para revertir</li>
                                <li><strong>SQL:</strong> La operaci√≥n real a ejecutar</li>
                            </ul>
                        </div>
                        
                        <div class="changeset-example">
                            <h4>BUENAS PR√ÅCTICAS DE IDENTIFICACI√ìN</h4>
                            <ul>
                                <li><strong>Autor:</strong> Usar un formato consistente (nombre.apellido, usuario git, etc.)</li>
                                <li><strong>ID:</strong> 
                                    <ul>
                                        <li>Usar prefijos num√©ricos secuenciales: 001, 002, 003...</li>
                                        <li>Agregar sufijos para cambios relacionados: 001-1, 001-2, 001-3...</li>
                                        <li>Considerar incluir fecha: 20240115-001, 20240115-002...</li>
                                        <li>Mantener un registro o convenci√≥n de equipo</li>
                                    </ul>
                                </li>
                                <li><strong>Comentarios:</strong> Ser descriptivos pero concisos</li>
                                <li><strong>Rollback:</strong> Siempre que sea posible, definir rollback expl√≠cito</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
           
            <!-- NUEVA SECCI√ìN: EJECUCI√ìN DE LIQUIBASE  -->
            <section class="concept-section">
              <h3>üöÄ EJECUCI√ìN DE CHANGELOGS EN LIQUIBASE</h3>
              
              <div class="execution-commands">
                  <h4>COMANDOS ESENCIALES DE LIQUIBASE 4.x</h4>
                  
                  <div class="workflow-step">
                      <span class="workflow-step-number">!</span>
                      <strong>IMPORTANTE: Cambios en Liquibase 4.x</strong>
                      <p>En versiones 4.x, <code>--defaultsFile</code> no funciona como antes. Debes especificar los par√°metros directamente:</p>
                  </div>
                  
                  <div class="workflow-step">
                      <span class="workflow-step-number">1</span>
                      <strong>VALIDACI√ìN (VALIDATE) - COMANDO CORRECTO</strong>
                      <p>Verifica que el changelog est√© bien formado SIN ejecutar cambios:</p>
                      <div class="command-example">liquibase --url="jdbc:postgresql://localhost:5432/liquibase_demo" --username=liquibase_user --password=liquibase_pass --changelog-file=changelog_master.json validate</div>
                      <p><strong>Salida esperada:</strong> <code>No validation errors found.</code></p>
                  </div>
                  
                  <div class="workflow-step">
                      <span class="workflow-step-number">2</span>
                      <strong>EJECUCI√ìN (UPDATE)</strong>
                      <p>Aplica los changesets a la base de datos:</p>
                      <div class="command-example">liquibase --url="jdbc:postgresql://localhost:5432/liquibase_demo" --username=liquibase_user --password=liquibase_pass --changelog-file=changelog_master.json update</div>
                  </div>
                  
                  <div class="workflow-step">
                      <span class="workflow-step-number">3</span>
                      <strong>ESTRUCTURA CORRECTA DE CHANGESETS</strong>
                      <p><strong>Formato v√°lido (usa : para separar autor e id):</strong></p>
                      <div class="code-block">-- liquibase formatted sql
          -- changeset instructor:demo:001-1
          -- comment: Crear tabla de usuarios

          CREATE TABLE IF NOT EXISTS users (...);

          -- rollback DROP TABLE IF EXISTS users;

          -- changeset instructor:demo:001-2
          CREATE INDEX idx_users_email ON users(email);</div>
                      
                      <div class="danger-note" style="margin-top: 15px;">
                          <h5>‚ùå ERROR COM√öN - FORMATO INCORRECTO</h5>
                          <p>Este formato causa <code>changesets had duplicate identifiers</code>:</p>
                          <div class="command-example">-- ‚ùå INCORRECTO: Espacio entre autor e id
          -- changeset instructor:demo:id:001-1

          -- ‚úÖ CORRECTO: Usar dos puntos
          -- changeset instructor:demo:001-1</div>
                      </div>
                  </div>
                  
                  <div class="workflow-step">
                      <span class="workflow-step-number">4</span>
                      <strong>OTROS COMANDOS √öTILES</strong>
                      <div class="command-example"># Ver estado de changesets
          liquibase --url="jdbc:postgresql://localhost:5432/liquibase_demo" --username=liquibase_user --password=liquibase_pass --changelog-file=changelog_master.json status

          # Ver historial de ejecuciones
          liquibase --url="jdbc:postgresql://localhost:5432/liquibase_demo" --username=liquibase_user --password=liquibase_pass --changelog-file=changelog_master.json history</div>
                  </div>
                  
                  <div class="success-note" style="background-color: #d4edda; border-left: 5px solid #28a745; padding: 15px; margin: 15px 0; border-radius: 0 6px 6px 0; color: #155724;">
                      <h5>‚úÖ VALIDACI√ìN EXITOSA</h5>
                      <p>Cuando todo est√° correcto, ver√°s: <code>No validation errors found.</code> y <code>Liquibase command 'validate' was executed successfully.</code></p>
                  </div>
              </div>
          </section>
           
            <!-- NUEVA SECCI√ìN: ROLLBACK EN LIQUIBASE -->
            <section class="concept-section">
                <h3>‚Ü©Ô∏è ROLLBACK - REVERSI√ìN DE CAMBIOS</h3>
                
                <div class="rollback-section">
                    <h4>DEFINICI√ìN DE ROLLBACK EN CHANGESETS</h4>
                    <p>Cada changeset DEBE incluir instrucciones de rollback. Liquibase las usa para revertir cambios cuando es necesario.</p>
                    
                    <div class="rollback-example">
                        <h5>ROLLBACK para CREATE TABLE</h5>
                        <div class="code-block">-- changeset instructor:demo:id:001-1
CREATE TABLE IF NOT EXISTS users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) NOT NULL UNIQUE
);

-- rollback DROP TABLE IF EXISTS users;</div>
                        <p><strong>Explicaci√≥n:</strong> Si necesitamos revertir este changeset, Liquibase ejecutar√° <code>DROP TABLE IF EXISTS users</code></p>
                    </div>
                    
                    <div class="rollback-example">
                        <h5>ROLLBACK para ADD COLUMN</h5>
                        <div class="code-block">-- changeset instructor:demo:id:004-1
ALTER TABLE users ADD COLUMN phone_number VARCHAR(15);

-- rollback ALTER TABLE users DROP COLUMN phone_number;</div>
                    </div>
                    
                    <div class="rollback-example">
                        <h5>ROLLBACK para INSERT</h5>
                        <div class="code-block">-- changeset instructor:demo:id:003-1
INSERT INTO users (username, email) VALUES
('jperez', 'juan.perez@empresa.com'),
('mgarcia', 'maria.garcia@empresa.com');

-- rollback DELETE FROM users WHERE username IN ('jperez', 'mgarcia');</div>
                    </div>
                    
                    <div class="rollback-example">
                        <h5>ROLLBACK para UPDATE</h5>
                        <div class="code-block">-- changeset instructor:demo:id:005-1
UPDATE users SET is_active = false
WHERE created_at < NOW() - INTERVAL '1 year';

-- rollback UPDATE users SET is_active = true
WHERE created_at < NOW() - INTERVAL '1 year';</div>
                    </div>
                </div>
                
                <div class="danger-note">
                    <h5>ROLLBACKS PELIGROSOS</h5>
                    <p>Algunas operaciones NO tienen rollback autom√°tico seguro:</p>
                    
                    <div class="code-block">-- ‚ùå PELIGROSO: DELETE sin WHERE espec√≠fico
DELETE FROM audit_logs
WHERE created_at < NOW() - INTERVAL '1 year';

-- rollback: No es reversible autom√°ticamente</div>
                    
                    <div class="code-block">-- ‚ùå PELIGROSO: DROP TABLE con datos importantes
DROP TABLE important_data;

-- rollback: CREATE TABLE important_data (...);
-- PERO: Los datos se pierden para siempre</div>
                    
                    <p><strong>Regla de oro:</strong> Para operaciones destructivas, crear backup primero o usar soft delete.</p>
                </div>
                
                <div class="workflow-step">
                    <span class="workflow-step-number">1</span>
                    <strong>COMANDOS DE ROLLBACK</strong>
                    
                    <p><strong>Rollback por conteo:</strong> Revertir los √∫ltimos N changesets</p>
                    <div class="command-example">liquibase --defaultsFile=properties/local-dev.json rollback-count 2</div>
                    
                    <p><strong>Rollback a tag:</strong> Revertir a un punto espec√≠fico marcado</p>
                    <div class="command-example"># Primero marcar un punto
liquibase --defaultsFile=properties/local-dev.json tag v1.0

# Luego revertir
liquibase --defaultsFile=properties/local-dev.json rollback v1.0</div>
                    
                    <p><strong>Rollback a fecha:</strong> Revertir a un estado espec√≠fico en el tiempo</p>
                    <div class="command-example">liquibase --defaultsFile=properties/local-dev.json rollback-to-date 2024-01-15</div>
                </div>
            </section>
           
            <!-- Secci√≥n original de estructura de repositorio -->
            <section class="concept-section">
                <h3>ESTRUCTURA DE REPOSITORIO EN GITHUB</h3>
               
                <div class="file-structure">
                    <div class="folder">nombre-repositorio-yugabyte/</div>
                    <div class="file json-file">changelog_master.json</div>
                    <div class="folder">properties/</div>
                    <div class="file json-file" style="margin-left: 40px;">instancia-nombreBD.json</div>
                    <div class="file json-file" style="margin-left: 40px;">variables.json</div>
                    <div class="folder">scripts/</div>
                    <div class="folder" style="margin-left: 40px;">tables/</div>
                    <div class="folder" style="margin-left: 60px;">create/</div>
                    <div class="file sql-file" style="margin-left: 80px;">001_create_users_table.sql</div>
                    <div class="file sql-file" style="margin-left: 80px;">002_create_products_table.sql</div>
                    <div class="folder" style="margin-left: 60px;">alter/</div>
                    <div class="folder" style="margin-left: 40px;">views/</div>
                    <div class="folder" style="margin-left: 40px;">functions/</div>
                    <div class="folder" style="margin-left: 40px;">stored_procedures/</div>
                    <div class="folder" style="margin-left: 40px;">data/</div>
                    <div class="folder" style="margin-left: 60px;">insert/</div>
                    <div class="folder" style="margin-left: 60px;">update/</div>
                </div>
               
                <h4>CONVENCIONES DE NOMBRADO</h4>
                <div class="diagram-grid">
                    <div class="diagram-card">
                        <div class="icon">üìÅ</div>
                        <h4>Repositorio</h4>
                        <p><code>nombre-base-datos-yugabyte</code><br>Refleja la base de datos asociada</p>
                    </div>
                   
                    <div class="diagram-card">
                        <div class="icon">üìÑ</div>
                        <h4>Changelog Master</h4>
                        <p><code>changelog_master.json</code><br>Siempre en ra√≠z del repositorio</p>
                    </div>
                   
                    <div class="diagram-card">
                        <div class="icon">‚öôÔ∏è</div>
                        <h4>Properties</h4>
                        <p><code>instancia-nombreBD.json</code><br>Configuraci√≥n por ambiente</p>
                    </div>
                </div>
            </section>
           
            <!-- Secci√≥n original de changelog maestro -->
            <section class="concept-section">
                <h3>CHANGELOG MAESTRO - PUNTO DE ENTRADA</h3>
               
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="changelog-json">changelog_master.json</button>
                        <button class="tab-button" data-tab="changelog-explicacion">Explicaci√≥n</button>
                        <button class="tab-button" data-tab="changelog-best">Buenas Pr√°cticas</button>
                    </div>
                   
                    <div class="tab-content active" id="changelog-json">
                        <div class="code-block">{
  "databaseChangeLog": [
    {
      "include": {
        "file": "scripts/tables/create/001_create_users_table.sql",
        "relativeToChangelogFile": true
      }
    },
    {
      "include": {
        "file": "scripts/tables/create/002_create_products_table.sql",
        "relativeToChangelogFile": true
      }
    },
    {
      "include": {
        "file": "scripts/data/insert/001_initial_users_data.sql",
        "relativeToChangelogFile": true
      }
    }
  ]
}</div>
                    </div>
                   
                    <div class="tab-content" id="changelog-explicacion">
                        <div class="workflow-step">
                            <span class="workflow-step-number">1</span>
                            <strong>Validaci√≥n del Changelog</strong>
                            <p>Antes de ejecutar cualquier cambio, valida la estructura:</p>
                            <div class="command-example">liquibase --defaultsFile=properties/local-dev.json validate</div>
                        </div>
                       
                        <div class="workflow-step">
                            <span class="workflow-step-number">2</span>
                            <strong>Punto de Entrada √önico</strong>
                            <p>Liquibase siempre comienza ejecutando el changelog maestro, que referencia todos los dem√°s scripts.</p>
                        </div>
                       
                        <div class="workflow-step">
                            <span class="workflow-step-number">3</span>
                            <strong>Orden de Ejecuci√≥n</strong>
                            <p>Los changesets se ejecutan en el orden definido en el array. Este orden es CR√çTICO para dependencias.</p>
                        </div>
                       
                        <div class="workflow-step">
                            <span class="workflow-step-number">4</span>
                            <strong>Seguimiento Autom√°tico</strong>
                            <p>Liquibase mantiene una tabla (DATABASECHANGELOG) que registra qu√© changesets ya fueron aplicados.</p>
                        </div>
                    </div>
                   
                    <div class="tab-content" id="changelog-best">
                        <div class="best-practice">
                            <h4>RECOMENDACIONES PARA CHANGELOG MAESTRO</h4>
                            <ul>
                                <li>Mantener siempre en la ra√≠z del repositorio</li>
                                <li>Usar rutas relativas para mejor portabilidad</li>
                                <li>Agrupar includes l√≥gicamente (primero estructura, luego datos)</li>
                                <li>Comentar secciones para facilitar mantenimiento</li>
                                <li><strong>Validar JSON antes de commit para evitar errores de sintaxis</strong></li>
                                <li><strong>Ejecutar validaci√≥n con Liquibase antes de cada ejecuci√≥n</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
           
            <!-- SECCI√ìN RESTAURADA: TIPOS DE CHANGESETS -->
            <section class="concept-section">
                <h3>üìö TIPOS DE CHANGESETS - REFERENCIA COMPLETA</h3>
                <p>A continuaci√≥n se muestran ejemplos de los tipos m√°s comunes de changesets que puedes utilizar en Liquibase.</p>
               
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-button active" data-tab="changeset-original">Originales</button>
                        <button class="tab-button" data-tab="changeset-structure">Estructura</button>
                        <button class="tab-button" data-tab="changeset-data">Datos</button>
                        <button class="tab-button" data-tab="changeset-advanced">Avanzados</button>
                    </div>
                   
                    <!-- TAB: CHANGESETS ORIGINALES DEL CURSO -->
                    <div class="tab-content active" id="changeset-original">
                        <div class="changeset-example">
                            <h4>001_create_users_table.sql (Original)</h4>
                            <div class="code-block">-- liquibase formatted sql
-- changeset instructor:demo:id:001-1
-- comment: Crear tabla de usuarios para sistema de demostraci√≥n

CREATE TABLE IF NOT EXISTS users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) NOT NULL UNIQUE,
    email VARCHAR(100) NOT NULL,
    full_name VARCHAR(150) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    is_active BOOLEAN DEFAULT true
);

-- rollback DROP TABLE IF EXISTS users;

-- changeset instructor:demo:id:001-2
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_created_at ON users(created_at DESC);
CREATE INDEX idx_users_active ON users(is_active) WHERE is_active = true;

-- changeset instructor:demo:id:001-3
-- comment: Agregar constraint de email v√°lido
ALTER TABLE users ADD CONSTRAINT valid_email CHECK (email ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,}$');</div>
                        </div>
                       
                        <div class="changeset-example">
                            <h4>002_create_products_table.sql (Original)</h4>
                            <div class="code-block">-- liquibase formatted sql
-- changeset instructor:demo:id:002-1
-- comment: Crear tabla de productos para cat√°logo

CREATE TABLE IF NOT EXISTS products (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    sku VARCHAR(20) NOT NULL UNIQUE,
    name VARCHAR(200) NOT NULL,
    description TEXT,
    price DECIMAL(10,2) NOT NULL CHECK (price > 0),
    stock_quantity INTEGER DEFAULT 0,
    category VARCHAR(50),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- rollback DROP TABLE IF EXISTS products;

-- changeset instructor:demo:id:002-2
CREATE INDEX idx_products_sku ON products(sku);
CREATE INDEX idx_products_category ON products(category);
CREATE INDEX idx_products_price ON products(price);

-- changeset instructor:demo:id:002-3
-- comment: Agregar columna de auditor√≠a
ALTER TABLE products ADD COLUMN audit_user VARCHAR(50) DEFAULT 'system';</div>
                        </div>
                       
                        <div class="changeset-example">
                            <h4>001_initial_users_data.sql (Original)</h4>
                            <div class="code-block">-- liquibase formatted sql
-- changeset instructor:demo:id:003-1
-- comment: Insertar datos iniciales de demostraci√≥n

-- Insertar usuarios de prueba
INSERT INTO users (username, email, full_name) VALUES
('jperez', 'juan.perez@empresa.com', 'Juan P√©rez'),
('mgarcia', 'maria.garcia@empresa.com', 'Mar√≠a Garc√≠a'),
('clopez', 'carlos.lopez@empresa.com', 'Carlos L√≥pez'),
('admin', 'admin@empresa.com', 'Administrador del Sistema'),
('tester', 'tester@empresa.com', 'Usuario de Pruebas')
ON CONFLICT (username) DO NOTHING;

-- rollback DELETE FROM users WHERE username IN ('jperez', 'mgarcia', 'clopez', 'admin', 'tester');

-- changeset instructor:demo:id:003-2
-- comment: Insertar productos de demostraci√≥n

INSERT INTO products (sku, name, description, price, category, stock_quantity) VALUES
('PROD-001', 'Laptop Dell XPS 13', 'Laptop ultradelgada 13 pulgadas, 16GB RAM, 512GB SSD', 1299.99, 'Electr√≥nica', 10),
('PROD-002', 'Mouse Logitech MX Master 3', 'Mouse ergon√≥mico avanzado para productividad', 99.99, 'Accesorios', 25),
('PROD-003', 'Teclado Mec√°nico RGB', 'Teclado gaming con switches blue y retroiluminaci√≥n RGB', 79.99, 'Accesorios', 15),
('PROD-004', 'Monitor 4K 27"', 'Monitor UHD para dise√±o gr√°fico y desarrollo', 499.99, 'Electr√≥nica', 8),
('PROD-005', 'Disco SSD 1TB NVMe', 'Disco de estado s√≥lido de alta velocidad para PC', 89.99, 'Componentes', 30)
ON CONFLICT (sku) DO NOTHING;

-- rollback DELETE FROM products WHERE sku LIKE 'PROD-%';</div>
                        </div>
                    </div>
                   
                    <!-- TAB: CHANGESETS DE ESTRUCTURA -->
                    <div class="tab-content" id="changeset-structure">
                        <div class="changeset-category category-structure">
                            <h4>üèóÔ∏è OPERACIONES DE ESTRUCTURA</h4>
                           
                            <div class="example-grid">
                                <div class="changeset-example">
                                    <h4>ALTER TABLE - Agregar Columna</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:004-1
ALTER TABLE users 
ADD COLUMN phone_number VARCHAR(15);

-- rollback ALTER TABLE users DROP COLUMN phone_number;</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>ALTER TABLE - Modificar Columna</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:004-2
ALTER TABLE users 
ALTER COLUMN email TYPE VARCHAR(200);

-- rollback ALTER TABLE users ALTER COLUMN email TYPE VARCHAR(100);</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>ALTER TABLE - Renombrar</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:004-3
ALTER TABLE users 
RENAME COLUMN full_name TO complete_name;

-- rollback ALTER TABLE users RENAME COLUMN complete_name TO full_name;</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>DROP TABLE</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:004-4
DROP TABLE IF EXISTS old_users;

-- rollback CREATE TABLE old_users (id SERIAL PRIMARY KEY, name VARCHAR(100));</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>CREATE INDEX Compuesto</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:004-5
CREATE INDEX idx_users_name_email 
ON users(username, email);

-- rollback DROP INDEX idx_users_name_email;</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>CREATE UNIQUE INDEX</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:004-6
CREATE UNIQUE INDEX uidx_users_employee_code 
ON users(employee_code);

-- rollback DROP INDEX uidx_users_employee_code;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                    <!-- TAB: CHANGESETS DE DATOS -->
                    <div class="tab-content" id="changeset-data">
                        <div class="changeset-category category-data">
                            <h4>üìä OPERACIONES CON DATOS</h4>
                           
                            <div class="example-grid">
                                <div class="changeset-example">
                                    <h4>UPDATE con WHERE</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:005-1
UPDATE users 
SET is_active = false
WHERE created_at < NOW() - INTERVAL '1 year';

-- rollback UPDATE users SET is_active = true WHERE created_at < NOW() - INTERVAL '1 year';</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>UPDATE con Subquery</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:005-2
UPDATE products p
SET price = price * 1.1
WHERE category = 'Electr√≥nica';

-- rollback UPDATE products SET price = price / 1.1 WHERE category = 'Electr√≥nica';</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>DELETE Condicional</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:005-3
DELETE FROM session_logs
WHERE created_at < NOW() - INTERVAL '90 days';

-- rollback: No reversible autom√°ticamente - considerar backup</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>INSERT con SELECT</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:005-4
INSERT INTO user_backup (id, username, email)
SELECT id, username, email
FROM users
WHERE is_active = false;

-- rollback DELETE FROM user_backup WHERE id IN (SELECT id FROM users WHERE is_active = false);</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>TRUNCATE TABLE</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:005-5
TRUNCATE TABLE temp_calculations;

-- rollback: TRUNCATE no es reversible - solo para tablas temporales</div>
                                </div>
                            </div>
                        </div>
                    </div>
                   
                    <!-- TAB: CHANGESETS AVANZADOS -->
                    <div class="tab-content" id="changeset-advanced">
                        <div class="changeset-category category-advanced">
                            <h4>‚ö° OPERACIONES AVANZADAS</h4>
                           
                            <div class="example-grid">
                                <div class="changeset-example">
                                    <h4>CREATE VIEW</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:006-1
CREATE OR REPLACE VIEW active_users_report AS
SELECT 
    u.id,
    u.username,
    u.email,
    u.created_at,
    EXTRACT(YEAR FROM AGE(CURRENT_DATE, u.created_at)) AS years_active
FROM users u
WHERE u.is_active = true;

-- rollback DROP VIEW IF EXISTS active_users_report;</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>CREATE FUNCTION</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:006-2
CREATE OR REPLACE FUNCTION calculate_discount(
    base_price DECIMAL, 
    discount_percent DECIMAL
) 
RETURNS DECIMAL AS $$
BEGIN
    RETURN base_price * (1 - discount_percent / 100);
END;
$$ LANGUAGE plpgsql;

-- rollback DROP FUNCTION IF EXISTS calculate_discount(DECIMAL, DECIMAL);</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>CREATE SEQUENCE</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:006-3
CREATE SEQUENCE invoice_number_seq
START WITH 1000
INCREMENT BY 1
NO MINVALUE
NO MAXVALUE
CACHE 1;

-- rollback DROP SEQUENCE invoice_number_seq;</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>GRANT PERMISSIONS</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:006-4
GRANT SELECT, INSERT, UPDATE ON users TO app_user;
GRANT SELECT ON products TO app_user;

-- rollback REVOKE SELECT, INSERT, UPDATE ON users FROM app_user; REVOKE SELECT ON products FROM app_user;</div>
                                </div>
                               
                                <div class="changeset-example">
                                    <h4>CREATE SCHEMA</h4>
                                    <div class="code-block">-- changeset instructor:demo:id:006-5
CREATE SCHEMA audit_data;

-- rollback DROP SCHEMA audit_data CASCADE;</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
           
            <!-- Secci√≥n original de best practices -->
            <section class="best-practice">
                <h3>MEJORES PR√ÅCTICAS PARA CHANGESETS</h3>
                <ul>
                    <li><strong>Idempotencia:</strong> Usar CREATE TABLE IF NOT EXISTS para evitar errores si ya existe</li>
                    <li><strong>Rollback expl√≠cito:</strong> Siempre incluir comentario de rollback cuando sea posible</li>
                    <li><strong>Granularidad:</strong> Un changeset por cambio l√≥gico (no mezclar tablas en un solo archivo)</li>
                    <li><strong>Nombrado secuencial:</strong> Usar prefijos num√©ricos para mantener orden</li>
                    <li><strong>Metadata completa:</strong> Incluir autor, id y descripci√≥n en cada changeset</li>
                    <li><strong>Validaci√≥n local:</strong> Probar changeset localmente antes de commit</li>
                    <li><strong>Variables:</strong> Usar propiedades para valores que cambian entre ambientes</li>
                    <li><strong>Validaci√≥n con Liquibase:</strong> Ejecutar <code>validate</code> antes de cada ejecuci√≥n</li>
                </ul>
            </section>
           
            <!-- Secci√≥n original de actividad pr√°ctica -->
            <section class="activity">
                <h3><span class="icon">üß™</span> ACTIVIDAD PR√ÅCTICA</h3>
                <p><strong>Ejercicio:</strong> Dado el siguiente requerimiento, crea la estructura de archivos necesaria:</p>
                <p>"Necesitamos agregar una tabla 'orders' con las columnas: id, user_id, total_amount, status. Tambi√©n necesitamos una funci√≥n para calcular impuestos."</p>
               
                <div class="workflow-step">
                    <strong>Instrucciones:</strong>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Determina los archivos necesarios y sus ubicaciones</li>
                        <li>Prop√≥n nombres para los changesets</li>
                        <li>Dise√±a la estructura del changeset SQL incluyendo ROLLBACK</li>
                        <li>Indica c√≥mo modificar√≠as el changelog_master.json</li>
                        <li><strong>Escribe los comandos para VALIDAR y EJECUTAR</strong></li>
                        <li><strong>Explica c√≥mo har√≠as ROLLBACK si algo sale mal</strong></li>
                    </ol>
                </div>
            </section>
           
            <div class="navigation-buttons">
                <a href="leccion_i.html" class="btn">‚óÄ Lecci√≥n I: INTRO A LIQUIBASE</a>
                <a href="leccion_iii.html" class="btn btn-secondary">Siguiente Lecci√≥n: BREVE REPASO DE SQL ‚ñ∂</a>
            </div>
        </main>
    </div>
   
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sistema de pesta√±as principal
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');
           
            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                   
                    // Remover clase active de todos en el mismo contenedor
                    const parent = this.closest('.tab-container');
                    if (parent) {
                        parent.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
                        parent.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
                       
                        // Agregar clase active al seleccionado
                        this.classList.add('active');
                        parent.querySelector(`#${tabId}`).classList.add('active');
                    }
                });
            });
           
            // Funci√≥n para resaltar sintaxis SQL
            function highlightSQL(code) {
                let lines = code.split('\n');
                let highlighted = '';
                
                for (let line of lines) {
                    let highlightedLine = line;
                    
                    // Resaltar comentarios
                    highlightedLine = highlightedLine.replace(/^(\s*--.*)$/g, '<span class="code-comment">$1</span>');
                    
                    // Resaltar palabras clave SQL
                    const keywords = [
                        'CREATE', 'ALTER', 'DROP', 'SELECT', 'INSERT', 'UPDATE', 'DELETE', 
                        'TABLE', 'VIEW', 'FUNCTION', 'PROCEDURE', 'TRIGGER', 'INDEX', 'SEQUENCE', 
                        'GRANT', 'REVOKE', 'TRUNCATE', 'SCHEMA', 'WITH', 'AS', 'BEGIN', 'END', 
                        'RETURN', 'WHERE', 'FROM', 'JOIN', 'ON', 'GROUP BY', 'ORDER BY', 
                        'HAVING', 'LIMIT', 'OFFSET', 'IF NOT EXISTS', 'PRIMARY KEY', 'UNIQUE', 
                        'NOT NULL', 'DEFAULT', 'CHECK', 'FOREIGN KEY', 'REFERENCES', 
                        'ON CONFLICT', 'DO NOTHING', 'INTERVAL', 'NOW', 'CURRENT_TIMESTAMP', 
                        'EXTRACT', 'AGE', 'CURRENT_DATE', 'LANGUAGE', 'plpgsql', 'START WITH', 
                        'INCREMENT BY', 'NO MINVALUE', 'NO MAXVALUE', 'CACHE', 'TYPE', 
                        'ADD COLUMN', 'DROP COLUMN', 'ALTER COLUMN', 'RENAME COLUMN', 'TO', 
                        'SET', 'VALUES', 'IN', 'LIKE', 'BETWEEN', 'DESC', 'ASC', 'TRUE', 
                        'FALSE', 'UUID', 'VARCHAR', 'TEXT', 'DECIMAL', 'INTEGER', 'INT', 
                        'SERIAL', 'TIMESTAMP', 'BOOLEAN', 'DATE', 'AND', 'OR', 'IS', 'NULL'
                    ];
                    
                    keywords.forEach(keyword => {
                        const regex = new RegExp(`\\b(${keyword})\\b`, 'gi');
                        highlightedLine = highlightedLine.replace(regex, '<span class="code-keyword">$1</span>');
                    });
                    
                    // Resaltar n√∫meros
                    highlightedLine = highlightedLine.replace(/(\b\d+\.?\d*\b)/g, '<span class="code-number">$1</span>');
                    
                    // Resaltar strings
                    highlightedLine = highlightedLine.replace(/'([^']*)'/g, '<span class="code-string">\'$1\'</span>');
                    
                    highlighted += highlightedLine + '\n';
                }
                
                return highlighted;
            }
           
            // Aplicar resaltado a todos los bloques de c√≥digo
            document.querySelectorAll('.code-block').forEach(block => {
                const originalText = block.textContent;
                block.innerHTML = highlightSQL(originalText);
            });
        });
    </script>
</body>
</html>